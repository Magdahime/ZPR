
import os
import platform

system = platform.system()
system = system.lower()
if system == "windows":
    print("Windows!")
    env = Environment()

    env.Append(CPPPATH=['#include',
                        '#lib/SFML-2.5.1-Win/include',
                        '#lib/webview',
                        '#lib/boost_1_75_0',
                        "C:\\Program Files\\Python39\\include"     
                        ])

    env.Append(LINKFLAGS='/SUBSYSTEM:CONSOLE')

    env.Append(CXXFLAGS='/EHsc /MD /std:c++17 /openmp:experimental /O2')

    env.Append(LIBPATH=['#lib/SFML-2.5.1-Win/lib',
                        '#lib/webview/lib',
                        '#lib/boost_1_75_0/stage/lib',
                        'C:\Program Files\Python39\libs'
                        ])

    env.Append(LIBS=['sfml-graphics',
                     'sfml-window',
                     'sfml-system',
                     'webview',
                     'WebView2Loader.dll'
                     ])

    env.Program('../bin/CreatureSIM', Glob('*.cc'))

else:
    print("Linux!")
    env = Environment()
    env.Append(CPPDEFINES=['LINUX_WV'])
    env.Append(CPPPATH=['#include',
                        '#lib/webview/include'])
    env.Append(CXXFLAGS='-Wall -std=c++17 -DWEBVIEWGTK')
    env.Append(LIBS=['sfml-graphics',
                     'sfml-window',
                     'sfml-system',
                     'gomp'
                     ])
    env.Append(LIBPATH=['#/lib/SFML-2.5.1/lib'])
    env.ParseConfig('pkg-config --cflags --libs gtk+-3.0 webkit2gtk-4.0')
    VariantDir('#/build', '#/src', duplicate=0)
    resources = Glob("#src/*.cpp")
    env.Program('../bin/CreatureSIM', Glob('*.cc'))
